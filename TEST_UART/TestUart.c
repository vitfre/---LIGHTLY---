/*
 * TestUart.c
 *
 * Created: 03.11.2013 21:29:29
 *  Author: User
 */ 

#include "TestUart.h"

//---------------------------------------------------------------------------------------
ISR (TIMER0_OVF_vect)
{
	// Reinitialize Timer 0 value
	TCNT0=0x07;
	BUT_Debrief();
	KEY_Debrief();
	dig_show();
	return;
};
//---------------------------------------------------------------------------------------

int main(void)
{
	unsigned char samples[16]={0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,};
	unsigned char a=0,count=0,i=0;
	init_mcu();
	uart_init();
	BUT_Init();
	KEY_Init();
	SEG_Init();
	sei();
    while(1)
    {
        //TODO:: Please write your application code 
		uart_write(a);
		a++;
		_delay_ms(100);
		
		count = uart_rx_count();
		if(count)
		{
			for(i = 0; i < count; ++i)
			samples[i] = uart_read();
		}
		//---------------------------------------------------------------------------------------
		switch(BUT_GetKey())
		{
			case 0:
			{
				//---------------------------------------------------------------------------------------
				//Set_led_num(a);
				//---------------------------------------------------------------------------------------
			};break;
			case 1:
			{
				//---------------------------------------------------------------------------------------
				Set_led_num(samples[0]);
				//---------------------------------------------------------------------------------------
			};break;
			case 2:
			{
				//---------------------------------------------------------------------------------------
				Set_led_num(2);
				//---------------------------------------------------------------------------------------
			};break;
			case 3:
			{
				//---------------------------------------------------------------------------------------
				Set_led_num(3);
				//---------------------------------------------------------------------------------------
			};break;
			case 4:
			{
				//---------------------------------------------------------------------------------------
				Set_led_num(4);
				//---------------------------------------------------------------------------------------
			};break;
			case 5:
			{
				//---------------------------------------------------------------------------------------
				Set_led_num(5);
				//---------------------------------------------------------------------------------------
			};break;
		};
		//---------------------------------------------------------------------------------------
		
		
		
		
		
		//---------------------------------------------------------------------------------------
		switch(KEY_GetKey())
		{
			case 0:
			{
				//---------------------------------------------------------------------------------------
				//Set_led_num(a);
				//---------------------------------------------------------------------------------------
			};break;
			case 1:
			{
				//---------------------------------------------------------------------------------------
				Set_led_num(1);
				//---------------------------------------------------------------------------------------
			};break;
			case 2:
			{
				//---------------------------------------------------------------------------------------
				Set_led_num(2);
				//---------------------------------------------------------------------------------------
			};break;
			case 3:
			{
				//---------------------------------------------------------------------------------------
				Set_led_num(3);
				//---------------------------------------------------------------------------------------
			};break;
			case 4:
			{
				//---------------------------------------------------------------------------------------
				Set_led_num(4);
				//---------------------------------------------------------------------------------------
			};break;
			case 5:
			{
				//---------------------------------------------------------------------------------------
				Set_led_num(5);
				//---------------------------------------------------------------------------------------
			};break;
			case 6:
			{
				//---------------------------------------------------------------------------------------
				Set_led_num(6);
				//---------------------------------------------------------------------------------------
			};break;
			case 7:
			{
				//---------------------------------------------------------------------------------------
				Set_led_num(7);
				//---------------------------------------------------------------------------------------
			};break;
			case 8:
			{
				//---------------------------------------------------------------------------------------
				Set_led_num(8);
				//---------------------------------------------------------------------------------------
			};break;
			case 9:
			{
				//---------------------------------------------------------------------------------------
				Set_led_num(9);
				//---------------------------------------------------------------------------------------
			};break;
			case 10:
			{
				//---------------------------------------------------------------------------------------
				Set_led_num(10);
				//---------------------------------------------------------------------------------------
			};break;
			case 11:
			{
				//---------------------------------------------------------------------------------------
				Set_led_num(11);
				//---------------------------------------------------------------------------------------
			};break;
			case 12:
			{
				//---------------------------------------------------------------------------------------
				Set_led_num(12);
				//---------------------------------------------------------------------------------------
			};break;
		};
		//---------------------------------------------------------------------------------------
		
			
		
		
		
		
    };
};