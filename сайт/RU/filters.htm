<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Настройка кодеков - Справка Light Alloy</title>
<LINK href="Styles.css" rel="stylesheet" type="text/css" />
</head><body>
<iframe src="_contents.htm" frameborder="0">Contents</iframe>
<h1>Настройка кодеков</h1>

<h2>Системные или встроенные?</h2>

<p>Light Alloy способен работать как с системными, так и со встроенными кодеками. Настраивается это в <span class="path">Настройках \ Кодеках</span> (в расширенном режиме) путём установки или снятия галок на соответствующих позициях.<p>
<p><img src="Images/filters.prefs.png" /></p>
<p> Есть несколько способов ставить и снимать галки:</p>
<ul>
<li>по одной;</li>
<li>по разделам (с помощью галки у заголовков разделов)</li>
<li>все вместе через контекстное меню</li>
</ul>
<p>Отмеченные позиции свидетельствуют, что для указанных элементов будут использоваться встроенные кодеки.</p>

<h3>Встроенные кодеки</h3>
<p>Существует два режима работы на внутренних кодеках:</p>
<ul>
<li><b>отдавать предпочтение</b> внутренним кодекам;</li>
<li>использовать <b>только</b> внутренние кодеки;</li>
</ul>
<p>По умолчанию проигрыватель работает в первом режиме: он использует встроенные кодеки, но дополнительно подгружает недостающие или особо настырные внешние фильтры (например, соответственно настроенный FFDShow Video Codec). Это позволяет обеспечивать воспроизведение файла любой ценой, а также комбинировать удобное управление дорожками видеофайлов с расширенной их обработкой внешними промежуточными фильтрами (например, FFDShow Video Codec может учавствовать в <a href="svp.htm">повышении плавности видео</a>).</p>
<p>Если Вы желаете использовать исключительно встроенные кодеки, Вам нужно в <span class="path">Настройках \ Кодеках</span> установить галку "Игнорировать системные кодеки". Тогда проигрыватель не будет использовать системные кодеки ни при каких обстоятельствах. Это повысит скорость открытия файлов.</p>
<p>Однако, необходимо отметить, что встроенные кодеки могут воспроизвести не всё. В частности, они не могут воспроизводить такие типы файлов: .wmv, .wma (windows media), иногда возникают проблемы с воспроизведением .avi. Учтите это, если после "Игнорирования системных кодеков" у вас что-то не открывается.</p>

<h3>Системные кодеки</h3>
<p>Light Alloy позволяет очень гибко определять, где именно использовать системные кодеки. Использование системных кодеков целесообразно, если с внутренними есть проблемы или если системные более привычны.</p>

<p><b>Обратите внимание</b>: Использование внешних сплиттеров может привести к невозможности переключения звуковых дорожек или субтитров средствами Light Alloy!</p>

<a name="tree"></a>
<h2>Дерево фильтров</h2>
<p>Это окно отображает все фильтры, которые используются для воспроизведения текущего файла.</p>
<p><img src="Images/filters.png" /></p>
<p>Слева отображается некоторая служебная информация о фильтре, выделенном мышкой.</p>
<p>Справа наглядно и красиво в виде соединенных плиток, собственно, и отображено дерево фильтров.</p>
<p>Зеленая плитка - это сплиттер. Он вычленяет из файла отдельные дорожки и передает их кодекам (декодерам).</p>
<p>Голубые плитки - это кодеки (декодеры). Они "распаковывают" дорожки для последующего вывода на экран или для обработки фильтрами.</p>
<p>Фиолетовые плитки - это дополнительные фильтры, которые применяют к дорожкам разнообразные эффекты. Например, к звуку применяется микширование каналов (наподобие 5.1 -> 2.0), к видео - яркость/контрастность, к субтитрам - окантовка, тень.</p>
<p>Красные плитки - это устройства вывода. То, что на них подается и выводится на колонки и дисплей.</p>
<p>Цвета плиток весьма условны. Так кодек (декодер) может изображаться белой, а дополнительный фильтр - голубой плиткой.</p>
<p>Большая часть плиток в левом верхнем углу имеет эмблему лупы. Это значит, что двойной щелчок по плитке откроет окно с настройками или статистикой фильтра.</p>

<h2>Быстрая информация по видео и аудио потокам</h2>

<p>Помимо дерева фильтров информацию работе фильтров можно получить в виде особых OSD-сообщений, используя клавиши "Q" и "Ctrl + Q".</p>

<h3>Системное OSD</h3>
<p>"Q" показывает / скрывает краткую информацию по типу и обработке видеопотока и текущего аудиопотока.</p>
<p><img src="Images/filters.q.png"/></p><br/>

<h3>Статистика визуализатора</h3>
<p>"Ctrl + Q" показывает / скрывает статистику визуализатора.</p>
<p><img src="Images/filters.ctrlq.png" /></p>

<p>Статистика работает на таких визуализаторах:</p>
<ul>
<li>WMR-9 RL;</li>
<li>EVR CA;</li>
<li>EVR Synс.</li></ul>

<p>Наполнение статистики варьируется от визуализатора. Наиболее полная - на EVR CA.</p>

<h4>Расшифровка значений статистики</h4>

<p><b>Frame rate</b> - измеренная частота кадров видео, при этом отображаются значения, измеренные двумя методами - статистическим (слева) и на основании считывания данных из Pin декодера (справа). Для контента ДВД, визуализаторов EVR CA и EVR Sync используются свои методы.</p>
<ul>
	<li>Avr - усредненная частота кадров, рассчитанная по нескольким последним кадрам видео;</li>
	<li>Ref - базовая частота кадров, считываемая из файла видео;</li>
	<li>P или I - прогрессивное или чересстрочное видео, если сообщается микшером видео;</li>
	<li>FrameT - оценочное\рассчитываемое время отображения одного кадра, которое рассчитывается на основе анализа последних нескольких кадров;</li>
	<li>FrameR - частота кадров, рассчитывается на основе анализа последних нескольких кадров;</li>
	<li>Lock - отображается фиксация частоты кадров к распространенным частотам кадров видео, как то: 60, 60/1.001, 50, 48, 48/1.001, 30, 30/1.001, 25, 24 и 24/1.001 Гц;</li>
	<li>StdDev - усредненная разница временных промежутков отображения кадров на основе нескольких последних;</li>
	<li>Clock - результат деления времени отображения кадра и рассчитанного времени кадра в процентах основываясь на последнем кадре.</li>
</ul>
<p><b>Settings</b> - показывает используемые опции рендеринга.</p>
<p><b>Formats</b> - указываются форматы поверхностей, используемые при рендеринге выводимого изображения.</p>
<ul>
	<li>Surface - рабочие поверхности внутри цепочки рендеринга, чаще всего используются X8R8G8B8, A2R10G10B10, A16B16G16R16F и A32B32G32R32F поверхности;</li>
	<li>Backbuffer - формат поверхности, выводимый в цепочку свопа в конце цепочки рендеринга, это или X8R8G8B8, или A2R10G10B10;</li>
	<li>Display - формат поверхности, выводимый на дисплей из цепочки свопа, обычно это X8R8G8B8, но может быть и A2R10G10B10 в эксклюзивном режиме;</li>
	<li>Device - должен отображаться как "D3DDevEx" для Windows Vista и новее, "D3DDev" - для более старых ОС;</li>
	<li>D3DExError: - 0x00000000 означает, что не возникло ошибок при образовании D3DDevEx устройства, для более старых ОС (XP и старше) должен отображаться статус "No Ex Mode".</li>
</ul>
<p><b>Refresh rate</b> - определенная из функций VSync частота обновления экрана монитора.</p>
<ul>
	<li>Scan lines - число линий сканирования, определенное во время рабочего прохода VSync, и округленная частота кадров, взятая из сведений видеоадаптера;</li>
	<li>Last duration - длительность последнего кадра;</li>
	<li>Corrected Frame Time - "Yes" или "No", отображает, задействована ли функция корректировки неверных временных меток для видео VC-1 в контейнерах транспортных потоков MPEG.</li>
</ul>
<p><b>Sync offset</b> - отображается минимальное, максимальное, стандартное расхождение и усредненное время сдвига, вызванное VSync как противоположность постоянному таймеру\генератору времени кадров.</p>
<p><b>Jitter</b> - отображается минимальное, максимальное, стандартное расхождение ошибки таймирования в виде цифровых сигнальных циклов, используемых в цепочке рендеринга.</p>
<p><b>Subtitles</b> - информация, связанная с отображением субтитров поверх видео.</p>
<ul>
	<li>Free - число свободных кадров в цепочке;</li>
	<li>Allocated - число готовых и ожидающих кадров в цепочке;</li>
	<li>Buffered - число кадров, скопированных в видеоадаптер;</li>
	<li>Queue start - время в секундах до или после заполнения буфера субтитров;</li>
	<li>Queue end - время в секундах до или после очищения буфера субтитров.</li>
</ul>
<p><b>VBlank Wait</b> - временная разница между последней линией одного кадра и началом первой линии следующего кадра.</p>
<ul>
	<li>Start - линия, с которой начался последний кадр;</li>
	<li>End - линия, на которой закончился последний кадр;</li>
	<li>Wait - время ожидания вертикального гасящего интервала;</li>
	<li>Lock - период блокирования для возможности представления во время вертикального гасящего интервала;</li>
	<li>Offset - сдвиг в виде числа линий с начала вертикального гасящего интервала;</li>
	<li>Max - наибольшее измеренное значение сдвига;</li>
	<li>End Present - линия, на которой закончилось представление последнего кадра.</li>
</ul>
<p><b>Present Wait</b> - текущее, минимальное и максимальное время ожидания после окончания обработки кадра и собственно его представления.</p>
<p><b>Paint Time</b> - текущее, минимальное и максимальное время на
постановку в очередь всех команд для завершения рендеринга кадра в
очереди кадров, перед представлением этого кадра.</p>
<p><b>Raster Status</b> - текущее, минимальное и максимальное время ожидания окончания кадра.</p>
<p><b>Buffering</b> - показывает число сэмплов в буфере, ожидаемых к отображению, и число в данный момент отображаемых сэмплов.</p>
<ul>
	<li>Buffered - число завершенных кадров в буфере кадров микшера.</li>
	<li>Free - число свободных кадров в буфере кадров микшера.</li>
	<li>Current surface - кадр, который в данный момент рендерится из буфера.</li>
</ul>
<p><b>Video size</b> - показывает размер кадра воспроизводимого видео и соотношение сторон экрана (Aspect Ratio).</p>
<p><b>DXVA</b> - показывает поколение (DXVA1 \ DXVA2) задействованной аппаратной акселерации и используемый аппаратный декодер.</p>
<p><b>Render device</b> - показывает устройство рендеринга, т.е. марку вашего видеоадаптера.</p>
<p><b>DirectX SDK</b> - показывает номер DirectX SDK, использованный при компиляции Light Alloy.</p>
<p><b>Decoder</b> - название используемого декодера видео.</p>
<p><b>Mixer format</b> - формат поверхности, посылаемый к\от микшера.</p>
<ul>
	<li>Input - формат, посылаемый микшеру от декодера.</li>
	<li>Output - формат, посылаемый в цепочку рендеринга от микшера.</li>
</ul>
<p><b>Графики</b> - это джиттер-кривые (jitter curve), показывающие временной интервал между моментами, когда кадр ожидается к отображению, и когда реально отображается на экране. Самая длинная ось, которую зависимость пересекает, служит нулем отсчета, маленькие короткие - 10 мс, а более длинные - 40 мс. Если кривая находится выше этой длинной оси, то синхронизация в порядке. По нему хорошо ориентироваться на плавность (smoothless) вывода картинки, дрожание - достаточно, хотя бы в ОС Windows XP, сравнить графики в оконном режиме и в Direct3D режиме (как в играх).</p>

</body></html>