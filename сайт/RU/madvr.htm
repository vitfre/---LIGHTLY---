<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>MadVR - Справка Light Alloy</title>
<LINK href="Styles.css" rel="stylesheet" type="text/css" />
</head><body>
<iframe src="_contents.htm" frameborder="0">Contents</iframe>
<h1>MadVR</h1>

<p>MadVR <a class="ext" href="http://forum.doom9.org/showthread.php?t=146228">(официальный форум)</a>  - это относительно молодой визуализатор за авторством madshi. Основной упор в нем делается на максимальное качество выводимого изображения. Предъявляет весьма высокие требования к видеокарте.</p>

<p>К основным его особенностям можно отнести:</p>
<ul>
<li>высокое качество дискретизации цвета (chroma upsampling);</li>
<li>высокое качество преобразования YCbCr -> RGB;</li>
<li>высококачественные алгоритмы масштабирования видео (bicubic, mitchell, lanczos, spline и т.д.);</li>
<li>коррекция спектра и контрастности для разных видов мониторов (gamut and gamma correction);</li>
<li>обработка видео GPU в 16-битном режиме без потерь.</li>
</ul>

<h2>Сравнение MadVR с остальными визуализаторами</h2>
<p><img src="Images/madvr.compare.png"/></p>
<p>На изображении выше выполнено сравнение вывода кадра через VMR-7 и MadVR. Это образец видео, уменьшенного в 5 раз (само изображение увеличено, чтобы было проще заметить разницу). Обратите внимание, что MadVR аккуратнее сгладил резкие переходы, такие как левая щека и волосы или правое плечо и стена сзади.</p>
<p>Однако необходимо отметить, что в реальном использовании эта разница будет заметна на порядок слабее, поскольку столь существенные изменения размеров изображения очень редко используются.</p>

<h2>Системные требования</h2>
<ul>
<li>полная поддержка 3D DirectX 9;</li>
<li>пиксельные шейдеры 3.0;</li>
<li>128Mb или больше видеопамяти;</li>
<li>Операционная система Windows XP или старше.</li>
</ul>

<a name="install"></a><h2>Установка</h2>
<h3>Установка визуализатора в систему</h3>
<ol>
<li>Скачиваем с <a class="ext" href="http://madshi.net/madVR.zip">оф.сайта</a> zip архив. Рекомендуется версия 0.84.4 (иначе не будет работать DVD) или старше.</li>
<li>Распаковываем содержимое архива папку. Это будут программные файлы, поэтому рекомендуется использовать отдельную папку среди других программ.</li>
<li>Регистрируем MadVR в системе путем запуска <span class="path">install.bat</span> из папки с программой.</li>
</ol>
<h3>Первоначальная настройка в Light Alloy</h3>
<ol>
<li>В <span class="path">Настройках \ Видео \ вкладка Настройки обработки видео</span> выбираем визуализатор MadVR.</li>
<li>Запускаем произвольный видеофайл.</li>
<li>В дереве фильтров (<span class="key">F9</span>) двойным щелчком по соответствующей плитке открываем окно настроек MadVR.</li>
<li>Идем по адресу <span class="path">Edit settings \ rendering \ general settings</span> и снимаем галку <b>enable automatic fullscreen exclusive mode</b> (иначе высок риск зависания системы).<br/>
<img src="Images/madvr.check.png"/>
</li>
<li>закрываем фильм любым способом (перезапуск, выгрузка, воспроизведение другого файла, закрытие проигрывателя).</li>
</ol>

<h2>С чего начать?</h2>
<p>Для начала рекомендуется просто попытаться воспроизвести видео в полном экране.</p>
<p>Проверьте, плавно ли идет видео, не появляются ли при воспроизведении пропущенные кадры. Для этого нажмите во время воспроизведения <span class="key">Ctrl</span>+<span class="key">J</span> чтобы вывести статистику madVR. Посмотрите на <b>dropped frames</b>. Возможно, будет несколько пропущенных кадров, появившихся во время загрузки видео, поэтому рекомендуется нажать <span class="key">Ctrl</span>+<span class="key">R</span> для сброса счетчика. Лучше всего проверить несколько видео разного качества и размеров изображения. Если количество пропущенных кадров растет (а процессор при этом не перегружен), то, скорее всего, ваша видеокарта слишком слаба для использования madVR.</p>

<h2>Настройка MadVR</h2>

<h3>Масштабирование изображения</h3>
<p>Откройте настройки madVR через дерево фильтров. В появившемся окне нажмите на Edit Settings. Появится окно настроек madVR.</p>
<p>Для начала выберите тип вашего монитора в devices. Теперь мы изменим алгоритм в scaling algorithms.</p>
<p>Luma upsampling (например: 540p -> TV 1080p).<br/>
Фильтры отсортированы в порядке улучшения качества и, соответственно, потребляемым ресурсам компьютера. Выберите фильтр на ваше усмотрение. Лучшие результаты дают Bicubic, SoftCubic, Lanczos и Spline. Выбор фильтра полностью зависит от ваших предпочтений. Для вашего удобства присутствует небольшой график, показывающий что в фильтре хорошего (зеленый) и что плохого (красный).</p>
<p>Для Luma downsampling все то же самое, за исключением того, что фильтр служит для уменьшения размеров видео (например: 1080p -> TV 720p).</p>
<p>Для Chroma resampling рекомендуется оставить SoftCubic100.</p>

<h3>10-битное видео</h3>
<p>MadVR - единственный визуализатор, способный воспроизвести 10-битное видео без перекодировки в 8-битное. Для этого надо переключитьcя с внутреннего кодека на внешний для обеих позиций AVC/H264 в <span class="path">Настройках \ Кодеки</span>. Внешним кодеком необходимо сделать LAV video codec, заранее установленный в системе. Рекомендуется LAV video codec не ниже версии 0.52.</p>

<h2>Особенности работы MadVR</h2>

<p>При использовании MadVR необходимо учитывать несколько нюансов: </p>
<ul>
<li>MadVR иногда может конфликтовать со встроенным MPEG2 декодером - воспроизведение идет рывками. В таком случае MPEG2 декодер лучше переключить на внешний (рекомендуются Microsoft DTV-DVD Video Decoder (в Вин7) или LAV Video);</li>
<li>в режиме OSD "вместе с видео" будет отображаться OSD от madVR, а не от Light Alloy. Поэтому метод наложения OSD желательно переключить в "поверх видео";</li>
<li>техническое OSD вызывается комбинацией <span class="key">Ctrl</span>+<span class="key">J</span> вместо <span class="key">Q</span> (если не изменено в настройках MadVR).</li>
</ul>
<hr/>
<p>Статья актуальна для МadVR версий 0.84.4 - 0.84.7.</p>
</body></html>